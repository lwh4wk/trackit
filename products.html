<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Products</title>
    <link type="text/css" rel="stylesheet" href="bootstrap/css/bootstrap.css">

    <style>
        li.nav-item {
            text-color: white;
            color: white;
        }
        .jumbotron {
            background-color:#ea6e6e;
            color:white;
        }

        h5.faded-header{
            text-align: center;
            color: lightgray;
        }
        img.small-img{
            height: 90%;
            width: 50%;
        }
    </style>

    <script>
        function checkUser() {
            let xhrUser = new XMLHttpRequest();
            xhrUser.onload = function() {
                if (xhrUser.status == 200) {
                    if (xhrUser.responseText == "true") {
                        document.getElementById("navbar-list").innerHTML = "<li class=\"nav-item\"><a class=\"nav-link\" href=\"about.html\">About Us</a></li>\n" +
                            "                <li class=\"nav-item\"><a class=\"nav-link\" href=\"contact.html\">Contact Us</a></li>\n" +
                            "                <li class=\"nav-item\"><a class=\"nav-link active\" href=\"#\">Products</a></li>" +
                            "                <li class=\"nav-item\"><a class=\"nav-link\" href=\"account.html\">Manage Account</a></li>" +
                            "                <li class=\"nav-item\"><a class=\"nav-link\" href=\"logout.php\">Sign Out</a></li>";
                    } else {
                        window.location.href = "login.html";
                    }
                }
            }
            xhrUser.open('GET', 'checkUser.php', true);
            xhrUser.send();
        }
    </script>
</head>
<body style="background-image: url('img/green.png'); background-repeat: no-repeat; background-size: cover;" onload="checkUser()">
<header>
    <nav class="navbar navbar-dark navbar-expand bg-dark">
        <h2 class="navbar-brand brand-name">
            <a class="navbar-brand" href="index.html" style="max-width: 45%; padding: 0;"><img class="img-fluid" src="img/logo.png"></a>
        </h2>
        <div class="navbar-collapse justify-content-end">
            <ul class="navbar-nav" id="navbar-list">
            </ul>
        </div>
    </nav>
</header>

<div  style="padding-top: 2%; padding-bottom: 10%;">

    <div class="container-fluid text-center">
        <h1 style="color: black;">Our Products</h1>
        <hr>
    </div>
    <div class="row">
        <div class="col-6">
        <div>
            <h2 class="text-center" style="color: white;">The Complete Package</h2>
            <br>
            <h4 class="text-center" >Both the browser extension and the app.</h4>
            <h4 class="text-center" >Browser adds tracking numbers automatically from any website.</h4>
            <h4 class="text-center" >Track all your orders in our app.</h4>
            <br>
        </div>
        <div class="text-center">
            <h5 class="text-center" id="proPrice" style="color: #4e555b" >5 USD</h5>
            <br>
            <div id="proCheckout">
                <form action="https://test.bitpay.com/checkout" method="post">
                    <input type="hidden" name="action" value="checkout" />
                    <input type="hidden" name="posData" value="" />
                    <input type="hidden" name="data" value="X5rjfTDJKeUslPBtyOQISoooC2CRlmUGqeC2/TYyJdxxkYCVg9+lKFwePybjtojs+94v40QqKlvAoMS4ozo79SHRQg+dTzuzZE5HTU8DUBRgF2uzyX6V2AB+WQcRNu+U1fnRaEfKh8VZzBrIhhDGM6foGj5GV1s7/J87VaMDYleyjJTdbFAJFEflyX1Gu1ka2sQacHQxYf4aV8YFjskRx3iWd9S18ujQkovJnZIPBKw=" />
                    <input type="image" src="https://test.bitpay.com/cdn/en_US/bp-btn-pay-currencies.svg" name="submit" style="width: 210px" alt="BitPay, the easy way to pay with bitcoins.">
                </form>
            </div>
            <br>
            <img class=" small-img" src="img/complete.jpg">
        </div>
        </div>
        <div class="col-6">
            <h2 class="text-center" style="color: white;">The Basic Package</h2>
            <br>
            <h4 class="text-center">Just the Track It app.</h4>
            <h4 class="text-center">Track all your orders on the go.</h4>
            <h4 class="text-center">Manually enter in tracking numbers.</h4>
            <br>
            <div class="align-content-center text-center">
                <h5 class="text-center" id="basicPrice" style="color: #4e555b" >1 USD</h5>
                <br>
                <div id="basicCheckout">
                    <form action="https://test.bitpay.com/checkout" method="post">
                        <input type="hidden" name="action" value="checkout" />
                        <input type="hidden" name="posData" value="" />
                        <input type="hidden" name="data" value="X5rjfTDJKeUslPBtyOQISoooC2CRlmUGqeC2/TYyJdzoWRBaHV1WweyqAFSCqgpkVe7ImR1GbVMRKZVidX4VmbqzlTX39s0hzzDWq2eBVLxPNPO7T6KscBQ4pZvPA04cQuOml1mjGQS8S9UaPmLARYs6CHOImX/G41ccj+IdAQ47DUVgHAA/stAXOCg3DapVKF63pIbawANVhu6YTFmOgHrpgTaT2GIkcZ0RBs7pq+Q=" />
                        <input type="image" src="https://test.bitpay.com/cdn/en_US/bp-btn-pay-currencies.svg" name="submit" style="width: 210px" alt="BitPay, the easy way to pay with bitcoins.">
                    </form>
                </div>
                <img class=" small-img" src="img/basic.jpg">
            </div>
        </div>
    </div>
    <div class="row justify-content-center text-center" >
        <div class="col-4 justify-content-center">
            <form class="container signup-box align-content-center" style="padding-top: 5%;">
                <h3>Promo Codes: </h3>
                <div class="form-check-inline">
                    <input type="text" id="code" class="form-control" placeholder="Promo Code" />
                    <input type="button" action="click" class="btn btn-primary" onclick="checkCoupon()" value="Apply Code" />
                </div>
            </form>
            <div id="codeError" class="justify-content-center text-center" style="padding-top: 3%;" hidden>
                <span>
                    <div class="alert alert-danger" role="alert">Invalid Code.</div>
                </span>
            </div>
        </div>
    </div>

</div>

<script>
    function checkCoupon() {
        let code = document.getElementById("code").value;
        document.getElementById("code").value = "";
        var xhrCode = new XMLHttpRequest();
        xhrCode.onload = function() {
            if (xhrCode.status == 200) {
                if (xhrCode.responseText != "invalid") {
                    let prices = xhrCode.responseText.split("**");
                    document.getElementById("basicPrice").innerText = prices[0] + " USD";
                    document.getElementById("proPrice").innerText = prices[1] + " USD";
                    document.getElementById("basicCheckout").innerHTML = prices[2];
                    document.getElementById("proCheckout").innerHTML = prices[3];
                    document.getElementById("codeError").hidden = true;
                } else {
                    document.getElementById("codeError").hidden = false;
                }
            }
        }
        xhrCode.open('POST', 'checkCode.php', true);
        xhrCode.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
        xhrCode.send("code=" + code);
    }
</script>

</body>
</html>
